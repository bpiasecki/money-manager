<div class="center-page">
  <div class="transactions-page-wrapper">
    <div *ngIf="showPage && accounts && ($items | async ) as transactions" class="transactions-cards-wrapper"
      [@showHideMainPage]>
      <mat-form-field class="filter-input">
        <mat-label>Filter</mat-label>
        <input matInput (keyup)="filterDatatable($event)" placeholder="Ex. Mia" #input autocomplete="off">
      </mat-form-field>

      <div class="items-wrapper">
        <div class="transactions-table">
          <ngx-datatable class="material" [rows]="transactions" [columnMode]="ColumnMode.flex"
            [sortType]="SortType.multi" [sorts]="[{prop: 'data.transactionDate', dir: 'desc'}]" [headerHeight]="50"
            [footerHeight]="50" [rowHeight]="'auto'" (activate)="editTransaction($event)">

            <ngx-datatable-column name="Lp." [maxWidth]='70' [resizeable]="false" [sortable]="false">
              <ng-template let-value="value" let-rowIndex="rowIndex" ngx-datatable-cell-template>
                {{ rowIndex + 1 }}
              </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column name="Data" [flexGrow]="1" [resizeable]="false" prop="data.transactionDate">
              <ng-template let-row="row" ngx-datatable-cell-template>
                {{ row.data.transactionDate | date}}
              </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column name="Nazwa" [flexGrow]="1" [resizeable]="false" prop="data.name">
              <ng-template let-row="row" ngx-datatable-cell-template>
                {{ row.data.name }}
              </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column name="Konto" [flexGrow]="1" [resizeable]="false" [sortable]="false">
              <ng-template let-row="row" ngx-datatable-cell-template>
                {{ row.data.sourceAccount | gridAccountName:row.data.targetAccount:accounts }}
              </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column name="Kategoria" [flexGrow]="1" [resizeable]="false" [sortable]="false">
              <ng-template let-row="row" ngx-datatable-cell-template>
                {{ row.data.category }}
              </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column name="Kwota" [flexGrow]="1" [resizeable]="false" prop="data.value">
              <ng-template let-row="row" ngx-datatable-cell-template>
                {{ row.data.value }}
              </ng-template>
            </ngx-datatable-column>

            <!-- <ngx-datatable-column name="Akcje" [maxWidth]='120' [minWidth]='95' [resizeable]="false" [sortable]="false">
              <ng-template let-row="row" ngx-datatable-cell-template>
                <div class="row-action-buttons">
                  <button mat-raised-button color="primary" type="button" (click)="editTransaction(row)">
                    <mat-icon>edit</mat-icon>
                  </button>
                  <button mat-raised-button color="primary" type="button" (click)="removeTransaction(row)">
                    <mat-icon>delete</mat-icon>
                  </button>
                </div>
              </ng-template>
            </ngx-datatable-column> -->

          </ngx-datatable>
        </div>
      </div>

      <div class="manage-accounts-buttons">
        <button mat-raised-button color="primary" type="button" title="Dodaj transakcjÄ™" (click)="addTransaction()">
          <mat-icon>add</mat-icon>
        </button>
      </div>
    </div>
  </div>
</div>